<div th:insert="~{fragment_inst_header}"></div>
<table class="table table-striped">
	<thead>
    	<tr>
			<th th:text="#{label.inst.vendor}">Vendor</th>
			<th th:text="#{label.inst.headquarter}">Headquarters</th>
			<th th:text="#{label.inst.url}">URL</th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr th:each="vendor : ${vendorlist}">
			<td th:text="${vendor.name}"></td>
			<td th:text="${vendor.headquarter}"></td>
			<td><a th:href="@{${vendor.url}}" th:text="${vendor.url}" /></td>
			<td>
				<button class="btn btn-secondary edit" data-bs-toggle="modal" th:onclick="|fragment_vendor_edit('__${vendor.id}__')|" th:text="#{button.table.edit}">Edit</button>
				<button class="btn btn-secondary del" th:onclick="|fragment_vendor_delete('__${vendor.id}__')|" th:text="#{button.table.delete}">Delete</button>
			</td>
		</tr>
	</tbody>
</table>
<div th:insert="~{fragment_dialog}"></div>
<button th:text="#{button.dialog.add}" onclick="fragment_vendor_onAdd();" class="btn btn-primary"></button>
<script type="text/javascript" th:inline="javascript">

	function fragment_vendor_onAdd() {
		fragment_vendor_info_init();
		$('#fragment_dialog_staticBackdrop').modal('show');
	}

	function fragment_dialog_onOk() {
debugger;
		$.ajax({
		  url: '/api/inst/admin/vendor',
		  type: 'POST',
		  contentType: 'application/json',
		  dataType: "text", 
		  data: JSON.stringify(fragment_vendor_info_object()),
		}).done((data, textStatus, jqXHR) => {
			$('#fragment_dialog_staticBackdrop').modal('hide');
		}).fail((jqXHR, textStatus, errorThrown) => {
		    console.log(textStatus);
		});						
	}
	
	function fragment_vendor_edit(id) {
debugger;
		selectedid = id;
		$.ajax({
		  url: '/api/vendor/' + id,
		  type: 'GET',
		  dataType: "json", 
//		  data: JSON.stringify(fragment_vendor_info_object()),
		}).done((data, textStatus, jqXHR) => {
			fragment_vendor_info_setobject(data);
			$('#fragment_dialog_staticBackdrop').modal('show');
		}).fail((jqXHR, textStatus, errorThrown) => {
		    
		});		

	}
	
	function fragment_vendor_delete(id) {
		
	}
</script>