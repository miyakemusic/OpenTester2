<div>
<!--	<button class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#fragment_newuser_staticBackdrop" th:text="#{label.user.newuser}">New User</button> -->
	<button onclick="fragment_newuser_onClick();" class="btn btn-secondary" th:text="#{label.user.newuser}"></button>
	<!-- Modal -->
	<div class="modal" id="fragment_newuser_staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="fragment_newuser_staticBackdropLabel" aria-hidden="true">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title" id="fragment_newuser_staticBackdropLabel" th:text="#{title.form.userinfo}">Modal title</h5>
	        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	      </div>
	      <div class="modal-body">
			  <div th:insert="~{fragment_userinfo}"></div> 
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" th:text="#{button.dialog.cancel}">Cancel</button>
	        <button type="button" class="btn btn-primary" 
	     
	        	th:onclick="fragment_newuser_onOk();" th:text="#{button.dialog.ok}">OK</button>
	      </div>
	    </div>
	  </div>
	</div>
	<script type="text/javascript" th:inline="javascript">	
		function fragment_newuser_onClick() {
			fragment_userinfo_initvalues();
			$('#fragment_newuser_staticBackdrop').modal('show');
		}
		
		function fragment_newuser_onOk() {
debugger;
			var user = fragment_userinfo_object();
			$.ajax({
				url: '/api/admin/newuser',
				type: 'POST',
				data: JSON.stringify(user),
				contentType: 'application/json',
				dataType: 'json'
			}).done((data, textStatus, jqXHR) => {
debugger;
				//fragment_userlist_updateTable();
				if (auth != null) {
					auth.changeState('userListChanged');
				}
				$('#fragment_newuser_staticBackdrop').modal('hide');
				//$('#fragment_newuser_staticBackdrop').hide();
			}).fail((jqXHR, textStatus, errorThrown) => {
debugger;
				fragment_userinfo_showMessage(jqXHR.responseText);
				console.log(textStatus);
			});				
		}
	</script>
</div>