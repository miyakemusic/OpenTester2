<div th:object="${user}">
	<div class="m-2">
		<label for="fragment_userinfo_username" th:text="#{label.user.username}">Username</label>
		<input type="text" id="fragment_userinfo_username" name="fragment_userinfo_username" class="form-control" th:field="*{username}" th:disabled="${usernameDisabled}" />
	</div>
	<div th:if="${passwordEnabled}" class="m-2">
		<label for="fragment_userinfo_password" th:text="#{label.user.password}">Password</label>	
		<input type="password" id="fragment_userinfo_password" name="fragment_userinfo_password" class="form-control" th:field="*{password}" />
	</div>
	<div th:if="${passwordEnabled}" class="m-2">
		<label for="fragment_userinfo_confirmpassword" th:text="#{label.user.confirmPass}">Confirm Password</label>	
		<input type="password" id="fragment_userinfo_confirmpassword" name="fragment_userinfo_confirmpassword" class="form-control" th:field="*{matchingPassword}"/>
	</div>
	<div th:if="${(onlyPassword==null) || !onlyPassword}">
		<div class="m-2">
			<label for="fragment_userinfo_firstname" th:text="#{label.user.firstName}">First Name</label>	
			<input type="text" id="fragment_userinfo_firstname" name="fragment_userinfo_firstname" class="form-control" th:field="*{firstName}" />
		</div>
		<div class="m-2">
			<label for="fragment_userinfo_lastname" th:text="#{label.user.lastName}">Last Name</label>	
			<input type="text" id="fragment_userinfo_lastname" name="fragment_userinfo_lastname" class="form-control" th:field="*{lastName}" />
		</div>
		<div class="m-2">
			<p th:text="#{label.user.authority}"></p>
			<span>
				<input class="form-check-input" type="checkbox" th:checked="${checkadmin}" id="fragment_userinfo_checkAdmin" th:disabled="${roleDisabled}">
	  			<label class="form-check-label" for="fragment_userinfo_checkAdmin">Admin</label>
			</span>
			<span>
				<input class="form-check-input" type="checkbox" th:checked="${checkuser}" id="fragment_userinfo_checkUser" th:disabled="${roleDisabled}">
	  			<label class="form-check-label" for="fragment_userinfo_checkUser">User</label>
			</span>
	
		</div>
	</div>
	<div id="fragment_userinfo_message"></div>
	<div><label id="fragment_userinfo_code" th:text="*{code}" hidden></label></div>
</div>
<script type="text/javascript" th:inline="javascript">
	function fragment_userinfo_initvalues() {
		$('#fragment_userinfo_username').val("");
		$('#fragment_userinfo_password').val("");
		$('#fragment_userinfo_confirmpassword').val("");
		$('#fragment_userinfo_firstname').val("");
		$('#fragment_userinfo_lastname').val("");
		$('#fragment_userinfo_firstname').val("");
		$('#fragment_userinfo_checkUser').prop('checked', true);
		$('#fragment_userinfo_checkAdmin').prop('checked', false);
		$('#fragment_userinfo_code').text("");
		
	}
	
	function fragment_userinfo_object() {
debugger;
		var user = new Object();
		user.username = $('#fragment_userinfo_username').val();
		user.firstName = $('#fragment_userinfo_firstname').val();
		user.lastName = $('#fragment_userinfo_lastname').val();
		user.password = $('#fragment_userinfo_password').val();
		user.matchingPassword = $('#fragment_userinfo_confirmpassword').val();
		user.code = $('#fragment_userinfo_code').text();
		
		user.roles = new Array();
		if ($('#fragment_userinfo_checkAdmin').prop('checked')) {
			user.roles.push('ADMIN');
		}
		if ($('#fragment_userinfo_checkUser').prop('checked')) {
			user.roles.push('USER');
		}		
		return user;
	}
	function fragment_userinfo_showMessage(json) {		
		$('#fragment_userinfo_message').empty();
		$('#fragment_userinfo_message').addClass('alert alert-danger');
		$('#fragment_userinfo_message').append(auth_createJsonError(json));
	}
</script>