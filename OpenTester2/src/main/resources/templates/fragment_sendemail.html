<div>
<!--<div class="form-group bg-light border border-light rounded login"> -->
	<h6 class="text-success text-center" th:text="${title}"></h6>
	<div id="fragment_sendemail_sendemail">
		<div class="m-2">
			<label for="fragment_sendemail_email" th:text="#{label.user.email}">Email</label>
			<input type="text" id="fragment_sendemail_email" name="fragment_sendemail_email" class="form-control" />
		</div>		
		<div class="m-2"><button th:onclick="|fragment_sendemail_submit('__${url}__');|" class="btn btn-primary form-control" 
			th:text="#{label.form.sendemail}">Send Email</button>
		</div>
	</div>
	<div id="fragment_sendemail_sentmessagediv" class="alert-primary bg-body" hidden>
		<label class="label label-success" id="fragment_sendemail_sentmessage" th:text="#{label.user.emailsent}"></label>
	</div>
</div>
<script type="text/javascript" th:inline="javascript">
	function fragment_sendemail_object() {
		var object = new Object();
		object.email = $('#fragment_sendemail_email').val();
		return object;	
	}
	function fragment_sendemail_submit(url) {
debugger;
		$.ajax({
		  url: url,
		  type: 'POST',
		  contentType: 'application/json',
		  data: JSON.stringify(fragment_sendemail_object()),
		  dataType: "text",
		}).done((data, textStatus, jqXHR) => {
			fragment_sendemail_showSentMessage();
			if (auth != null) {
				auth.changeState('resetPassword');
			}
		}).fail((jqXHR, textStatus, errorThrown) => {
			if (auth != null) {
				auth.auth_showJsonError(jqXHR.responseText);
			}
			//me.showLoginError(jqXHR, textStatus, errorThrown);
		});			
	}
	function fragment_sendemail_showSentMessage() {
		$('#fragment_sendemail_sendemail').empty();
		$('#fragment_sendemail_sentmessagediv').removeAttr('hidden');
	}
	
</script>