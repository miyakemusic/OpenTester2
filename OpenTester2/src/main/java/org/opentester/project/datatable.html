<button class="btn btn-link" onclick="onEditNode()">Edit</button>
<button class="btn btn-link" onclick="onNewNode()">New Folder</button>
<button class="btn btn-link" onclick="onDelete()">Delete</button>
<button class="btn btn-link" onclick="onAddTestItem()">New Test Item</button>
<table id="nodeListTable">
	<thead>
		<tr>
			<th>ID</th>
			<th>Name</th>
		</tr>
	</thead>
</table>
<script type="text/javascript" inline="javascript">
$(function() {
	$('#nodeListTable').DataTable( {
		paging: false,
		ajax: {
			url: '/*[[${geturl}]]*/',
			dataSrc: ''
			},
		columns: [
			{ data: 'id' },
			{ data: 'name' },
		]
	} );	
});

function onDelete() {
	smallDialog.callback(function(){
		$.ajax({
			url: '/*[[${delurl}]]*/',
			type: 'DELETE',
			dataType: 'text'
		}).done((data, textStatus, jqXHR) => {
			smallDialog.hideDialog();
			projectMain.structureChanged();
		}).fail((jqXHR, textStatus, errorThrown) => {
		});		
	});
	smallDialog.showDialog("<label>Delete?</label>");
}

function onNewNode() {
	largeDialog.callback(function(){
		var obj = new Object();
		/*[[${newObjectImpl}]]*/
		postObject('/*[[${posturl}]]*/', obj);
	});
	largeDialog.showDialog('/*[[${newContentHtml}]]*/');	
}

function onEditNode() {
	largeDialog.callback(function(){
		var obj = new Object();
		/*[[${editObjectImpl}]]*/
		postObject('/*[[${posturl}]]*/', obj);
	});
	largeDialog.showDialog('/*[[${editContentHtml}]]*/');	
}

function postObject(url, obj) {
	$.ajax({
		url: url,
		type: 'POST',
		data: JSON.stringify(obj),
		contentType: 'application/json',
		dataType: 'text'
	}).done((data, textStatus, jqXHR) => {
		debugger;
		largeDialog.hideDialog();
		projectMain.structureChanged();
	}).fail((jqXHR, textStatus, errorThrown) => {
	});			
}

function onAddTestItem() {
	
}
</script>