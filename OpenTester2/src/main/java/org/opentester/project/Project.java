package org.opentester.project;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Calendar;
import java.util.Date;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

import org.opentester.project.dto.ProjectUserDto;

import lombok.Builder;
import lombok.Data;

@Data
@Builder
public class Project {

	private int id;
	private String projectName;
	private String type;
//	private String status;
	
	private List<DutPackage> dutPackages = new ArrayList<>();

	public Set<ProjectUserDto> allOperators() {
		Set<ProjectUserDto> ret = new HashSet<>();
		this.dutPackages.forEach(f -> ret.addAll(f.allOprerators()));
		return ret;
	}

	public Set<String> allLocations() {
		Set<String> ret = new HashSet<>();
		this.dutPackages.forEach(f -> ret.addAll(f.allLocations()));
		return ret;
	}
	public PassFail passFail() {
		PassFail ret = new PassFail(0, 0, 0);
		this.dutPackages.forEach(f -> {
			ret.add(f.passFail());
		});
		return ret;
	}
	public Date completeDueDate() {
		LatestDate latest = new LatestDate();
		for (DutPackage dutPackage : this.dutPackages) {
			Date date = dutPackage.comleteDueDate();
			latest.add(date);
		}
		return latest.latest();
	}

	public Date completeData() {
		LatestDate latest = new LatestDate();
		for (DutPackage dutPackage : this.dutPackages) {
			Date date = dutPackage.comleteDate();
			latest.add(date);
		}
		return latest.latest();
	}

}
