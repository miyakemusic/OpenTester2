<script type="text/javascript" inline="javascript">
$(function() {
	var list = /*[[${list}]]*/;
	for (var i = 0; i < list.length; i++) {
		var p = list[i];
		new ProgressBar(p.id, p.passed, p.failed, p.untouched);
	}
	
	$("#submit_btn").click(function () {
		let form = $('#account_form').get(0);
		let formData = new FormData( form );
	
		$.ajax({
			url : "/admin/upload//*[[${uploadpath}]]*/",
			dataType: "html",
			type : "post",
			data : formData,
			processData: false,
			contentType: false
		}).done(function(resData) {
		}).fail(function(resData) {
		});
	});
});



function createNew() {
	var url = '/*[[${url}]]*/';
	var parent = /*[[${parent}]]*/;
	if (parent != null) {
		url += "?parent=" + parent;
	}
	$.ajax({
		url: url,
		type: 'GET',
		dataType: "text", 
	}).done((data, textStatus, jqXHR) => {
		largeDialog.callback(function(){
			updateProjectUI();
		});
		largeDialog.showDialog(data);
		
	}).fail((jqXHR, textStatus, errorThrown) => {

	});	
}

function on_copy() {
	debugger;
	copy_node('/*[[${type}]]*/', /*[[${parent}]]*/);
}
function on_paste() {
	debugger;
	paste_node('/*[[${type}]]*/', /*[[${parent}]]*/);
}

function on_edit_table(id) {
	var parent = /*[[${parent}]]*/;
	var url = '/*[[${url}]]*/'+ '/' + id;

	$.ajax({
		url: url, 
		type: 'GET',
		tdataType: 'html',
	}).done((data, textStatus, jqXHR) => {
		largeDialog.callback(function(){
			updateProjectUI();
		});
		largeDialog.showDialog(data);
//		updateProjectUI();
	}).fail((jqXHR, textStatus, errorThrown) => {
	});
}

function on_delete(id) {
	$.ajax({
		url: '/*[[${url}]]*/'+ '/' + id, 
		type: 'DELETE',
		tdataType: 'text',
	}).done((data, textStatus, jqXHR) => {
		updateProjectUI();
	}).fail((jqXHR, textStatus, errorThrown) => {
	});	
}
</script>