package org.opentester.project.entity.mapper;

import java.util.Date;

import org.opentester.project.dto.PassFailDto;

public class ProgressStatusGenerator {

	public String generate(Date completeDueDate, Date completeDate, PassFailDto passFail) {
		Date now = new Date();
		if (completeDueDate == null) {
			return "DueDate has not been set.";
		}
		String ret = "";
		String cls = "";
		String dateInfo = "";
		if (completeDate != null) {
			long diff  = (completeDueDate.getTime() - completeDate.getTime()) / (1000 * 60 * 60 * 24);
			
			if (diff < 0) {
				cls = "text-danger";
				dateInfo = Math.abs(diff) + " days behind scheudle";
			}
			else {
				cls = "text-success";
				dateInfo = "On schedule";
			}
			if (passFail.getFail() == 0) {
				dateInfo = "Pass, " + dateInfo;
			}
			else {
				dateInfo = "Fail, " + dateInfo;
			}
			ret =  "Completed. " + dateInfo;
			
		}
		else {
			long diff  = (completeDueDate.getTime() - now.getTime()) / (1000 * 60 * 60 * 24);
			if (diff < 0) {
				cls = "text-danger";
				dateInfo = Math.abs(diff) + " days behind scheudle";
			}
			else {
				cls = "text-success";
				dateInfo = "on scheudle";
			}
			ret = "Going. " + dateInfo;
		}
		return "<label class=\"" + cls + "\">"+ ret + "</label>";
	}

}
