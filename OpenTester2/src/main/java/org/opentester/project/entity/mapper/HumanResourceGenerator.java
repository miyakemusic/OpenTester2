package org.opentester.project.entity.mapper;

import java.util.HashMap;
import java.util.Map;
import java.util.Objects;
import java.util.Set;

import org.opentester.project.entity.ProjectUserEntity;

public class HumanResourceGenerator {

	public String generate(Set<ProjectUserEntity> allOperators) {
		StringBuilder html = new StringBuilder();
		int total = allOperators.size();
		
		Map<String, Integer> map = new HashMap<>();
		allOperators.stream().filter(u -> Objects.nonNull(u)).forEach(u -> {
			u.getSubRoles().forEach(r -> {
				if (!map.containsKey(r.getName())) {
					map.put(r.getName(), 0);
				}
				map.put(r.getName(), map.get(r.getName()) + 1);
			});
		});
		
		html.append("<div>Total: " + total + "</div>");
		html.append("<table class=\"table table-striped\"><tbody>");
		map.forEach((k,v) -> {
			html.append("<tr><td>" + k + "</td><td>" + v + "</td></tr>");
		});
		html.append("</tbody></table>");
		return html.toString();
	}

}
	