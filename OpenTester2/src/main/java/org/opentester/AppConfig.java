package org.opentester;

import java.net.InetAddress;
import java.net.UnknownHostException;
import java.nio.charset.StandardCharsets;

import org.modelmapper.ModelMapper;
import org.opentester.project.ProjectTreeGenerator;
import org.opentester.project.entity.PassFailCalculator;
import org.opentester.user.VerificationCodeManager;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class AppConfig {
    @Bean
    MultiMessageSource messageSource() {
		MultiMessageSource messageSource = new MultiMessageSource();
		messageSource.setBasenames("messages");
		messageSource.setDefaultEncoding(StandardCharsets.UTF_8.name());
		return messageSource;
	}

    @Bean
    VerificationCodeManager getVerificationCodeManager() {
		return new VerificationCodeManager();
	}

    @Bean
    MyHost getHost() {
		String hostName = "localhost";
		try {
			hostName = InetAddress.getLocalHost().getHostAddress();
		} catch (UnknownHostException e) {
			e.printStackTrace();
		}
		return MyHost.builder().host(hostName).port("8080").build();//new MyHost(hostName, "8080");
	}

    @Bean
    ModelMapper modelMapper() {
		return new ModelMapper();
	}

}
