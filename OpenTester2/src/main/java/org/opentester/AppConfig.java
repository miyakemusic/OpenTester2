package org.opentester;

import java.net.InetAddress;
import java.net.UnknownHostException;
import java.nio.charset.StandardCharsets;

import org.modelmapper.ModelMapper;
import org.opentester.project.ProjectTreeGenerator;
import org.opentester.project.entity.PassFailCalculator;
import org.opentester.user.VerificationCodeManager;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class AppConfig {
	@Bean
	public MultiMessageSource messageSource() {
		MultiMessageSource messageSource = new MultiMessageSource();
		messageSource.setBasenames("messages");
		messageSource.setDefaultEncoding(StandardCharsets.UTF_8.name());
		return messageSource;
	}
	
	@Bean
	public VerificationCodeManager getVerificationCodeManager() {
		return new VerificationCodeManager();
	}
	
	@Bean 
	public MyHost getHost() {
		String hostName = "localhost";
		try {
			hostName = InetAddress.getLocalHost().getHostAddress();
		} catch (UnknownHostException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return new MyHost(hostName, "8080");
	}
	
	@Bean
	public ModelMapper modelMapper() {
		return new ModelMapper();
	}
	
	@Bean
	public PassFailCalculator passFailCalculator() {
		return new PassFailCalculator();
	}
	
	@Bean
	public ProjectTreeGenerator projectTreeGenerator() {
		return new ProjectTreeGenerator();
	}
}
