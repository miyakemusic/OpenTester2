package org.opentester.user;

import java.util.ArrayList;
import java.util.List;

import org.springframework.validation.FieldError;

import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.Setter;

@Getter
@Setter
public class ErrorResponse {
    private CustomError error;

    public ErrorResponse(String code, List<FieldError> errors) {
        this.error = new CustomError(code);
        if (errors != null) {
        	errors.forEach(e -> error.getErrors().add(new ErrorField(e.getField(), e.getDefaultMessage())));
        }
    }
    
    @Getter
    @Setter
    @AllArgsConstructor
    private class ErrorField {
    	private String field;
    	private String error;
    }
    
    @Getter
    @Setter
//    @AllArgsConstructor
    private class CustomError {
        private String code;
        
        public CustomError(String code) {
        	this.code = code;
        }
//        private String message;
        private List<ErrorField> errors = new ArrayList<>();
    }
}
