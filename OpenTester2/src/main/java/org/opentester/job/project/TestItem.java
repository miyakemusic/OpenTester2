package org.opentester.job.project;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Date;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

import lombok.Builder;
import lombok.Data;

@Data
@Builder
public class TestItem {

	private int id;
	private String testTarget;
	private String unit;
	private String criteria;
	private String operator;
	private Date completeDueDate;
	private List<TestResult> resultHistory = new ArrayList<>();
	public Set<String> allOperators() {
		Set<String> ret = new HashSet<>();
		ret.add(this.operator);
		if (resultHistory != null) {
			resultHistory.forEach(r -> ret.add(r.getOperator()));
		}
		return ret;
	}
	public PassFail passFail() {
		if (this.resultHistory != null && this.resultHistory.size() > 0) {
			String result = this.resultHistory.get(0).getResult();
			return new PassFail(1, 0, 0);
		}
		return new PassFail(0,0,1);
	}
}
