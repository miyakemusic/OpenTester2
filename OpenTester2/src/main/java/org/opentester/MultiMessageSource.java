package org.opentester;

import java.util.List;
import java.util.Locale;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.support.ResourceBundleMessageSource;
import org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver;

import jakarta.servlet.http.HttpServletRequest;

public class MultiMessageSource extends ResourceBundleMessageSource {
	  @Autowired
	  HttpServletRequest request;

	  public String getMessage(String key, Object... params) {

	    AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver();

	    localeResolver.setDefaultLocale(Locale.ENGLISH);

	    localeResolver.setSupportedLocales(List.of(Locale.JAPANESE, Locale.ENGLISH));

	    return super.getMessage(key, params, localeResolver.resolveLocale(request));
	  }
}
